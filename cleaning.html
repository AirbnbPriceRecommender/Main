<!DOCTYPE HTML>
<!--
	Linear by TEMPLATED
    templated.co @templatedco
    Released for free under the Creative Commons Attribution 3.0 license (templated.co/license)
-->
<html>
	<head>
		<title>Airbnb Price Recommende</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="description" content="" />
		<meta name="keywords" content="" />
		<link href='http://fonts.googleapis.com/css?family=Roboto:400,100,300,700,500,900' rel='stylesheet' type='text/css'>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
		<script src="js/skel.min.js"></script>
		<script src="js/skel-panels.min.js"></script>
		<script src="js/init.js"></script>
		<script src="js/shCore.js" type="text/javascript"></script>
		<script src="js/shBrushPython.js" type="text/javascript"></script>
		
		<noscript>
			<link rel="stylesheet" href="css/skel-noscript.css" />
			<link rel="stylesheet" href="css/style.css" />
			<link rel="stylesheet" href="css/style-desktop.css" />
			<link href="css/shCore.css" rel="stylesheet" type="text/css" />
			<link href="css/shThemeDefault.css" rel="stylesheet" type="text/css" />
		</noscript>
		<script type="text/javascript">SyntaxHighlighter.all() </script>
	</head>
	<body>

	<!-- Header -->
		<!-- Header -->
		<div id="header">
			<div id="nav-wrapper"> 
				<a href="https://github.com/AirbnbPriceRecommender"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>
				<!-- Nav -->
				<nav id="nav">
					<ul>
						<li><a href="index.html">Home</a></li>
						<li><a href="data.html">Data</a></li>
						<li class="active"><a href="#">Cleaning</a></li>
						<li><a href="regression.html">Regression</a></li>
						<li><a href="results.html">Results</a></li>
						<li><a href="visualitzation.html">Visualitzation</a></li>
					</ul>
				</nav>
			</div>
			<div class="container"> 
				
				<!-- Logo -->
				<div id="logo">
					<h1><a href="index.html">Airbnb Price Recommender</a></h1>
					<span class="tag">Applying XGBoost Model</span>
				</div>
			</div>
		</div>

	<!-- Header --> 

	<!-- Main -->
		<div id="main">
			<div id="content" class="container">
				<section>
					<header>
						<h2>Cleaning</h2>
						<span class="byline">Cleaning done to the original data 	</span>
					</header>
					<p>First of all, we had to select the features to consider for our model. We considered all the features that could be relevant for a flat that is about to be put on the market, i.e.:</p>
					<br/>
					<div class="container">
                        <div class="row">
                            <section class="3u">
                                <ul class="default">
									<li>zipcode</li>
									<li>latitude</li>
									<li>longitude</li>
									<li>neighbourhood_cleansed</li>
									<li>host_about</li>
									<li>host_verifications</li>
									<li>host_listings_count</li>
                                </ul>
                            </section>
							<section class="3u">
                                <ul class="default">
									<li>host_identity_verified</li>
									<li>availability_30</li>
									<li>availability_60</li>
									<li>availability_90</li>
									<li>availability_365</li>
									<li>cancellation_policy</li>
									<li>property_type</li>
                                </ul>
							</section>
							<section class="3u">
                                <ul class="default">
									<li>room_type</li>
									<li>bathrooms</li>
									<li>bedrooms</li>
									<li>beds</li>
									<li>bed_type</li>
									<li>amenities</li>
									</ul>
							</section>
							<section class="3u">
                                <ul class="default">
									<li>accommodates</li>
									<li>guests_included</li>
									<li>extra_people</li>
									<li>cleaning_fee</li>
									<li>security_deposit</li>
									<li>price</li>
									</ul>
							</section>
                        </div>
					</div>
					<br/>
					<header>
						<span class="byline">Format conversions</span>
					</header>
					<p>We had to convert some of the features to a numeric format. Most importantly, the price feature:</p>
					<pre class="brush:python;">
						data.loc[:,('price')] = data.loc[:,('price')].map(lambda x:x.replace('$','').replace(',',''))
					</pre>
					<p>We decided to turn the feature "security_deposit" from a numerical value to 0 or 1. In this way we can make use of this feature by only asking the users of our application if they want or not to get a security deposit, without the need of specifying the amount. The same treatment was applied to the feature "host_about", which is the host description, thus retaining only the information of whether the user has uploaded some info on themselves or not.</p>							
					<p>Also, the ‘cancellation_policy’ options, i.e., ‘strict’,’moderate’ and ‘flexible’, were mapped into numbers. </p>
					<pre class="brush:python;">
						for feature in data.columns: # Loop through all columns in the dataframe
							if data[feature].dtype == 'object': # Only apply for columns with categorical strings
								data[feature] = pd.Categorical(data[feature]).codes # Replace strings with an integer
					</pre>
					<header>
						<span class="byline">Feature split and encoding</span>
					</header>
					<p>One hot encoding was performed over the features "neighbourhood_cleansed", "property_type", "room_type" and "bed_type". In this way we obtained 73, 3, 16, and 5 new features respectively.</p>
					<pre class="brush:python;">
						one_hot = pd.get_dummies(data['neighbourhood_cleansed'])
						data = data.drop('neighbourhood_cleansed', axis=1)
						data = data.join(one_hot)
					</pre>
					<p>In order to perform the one hot encoding over the "amenities" (wifi, tv, parking, etc..) and "host_verifications” (facebook, linkedin etc..) features we first had to split the columns regarding each amenity/ host verification option.</p>
					<pre class="brush:python;">
						def getColumnInfoTV(data):
							aux = cleanAmenities(data)
							if 'TV' in aux:
								return 1
							return 0

						data.loc[:,("TV")] = data.amenities.apply(getColumnInfoTV)
					</pre>
					<header>
						<span class="byline">Finding the “real” price</span>
					</header>
					<p>Finally, while working with this dataset we realized that often a high cleaning fee was associated to a lower property price. This could be a “strategy” by some users that want to “attract” possible clients with a lower price, but then gain more money with a high cleaning fee. In order not to be biased by this possibility, we decided to predict the full price, including the cleaning fee. Thus we sum the features “price” and “cleaning fee” to get the final price feature for our model.</p>
				</section>
			</div>
		</div>
	<!-- /Main -->

	<!-- Tweet -->
		<div id="tweet">
			<div class="container">
				<section>
					<blockquote></blockquote>
				</section>
			</div>
		</div>

	<!-- Footer -->
		<div id="footer">
			<div class="container">
				<section>
					<header>
						<h2>Get in touch</h2>
					</header>
					<ul class="contact">
						<li><a href="https://github.com/AirbnbPriceRecommender" class="fa fa-github"><span>GitHub</span></a></li>
					</ul>
				</section>
			</div>
		</div>

	<!-- Copyright -->
		<div id="copyright">
			<div class="container">
				Design: <a href="http://templated.co">TEMPLATED</a>
			</div>
		</div>

	</body>
</html>